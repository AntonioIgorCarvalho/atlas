{"ast":null,"code":"var _jsxFileName = \"/home/leosilvagomes/Documentos/mit/br-dashboard/src/components/Map/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useRef, useEffect } from \"react\";\nimport mapboxgl from \"mapbox-gl\"; //@ts-ignore\n\nimport geojsonURL from \"../../data/SP-geojson.json\";\nimport \"./styles.css\";\nimport * as turf from \"@turf/turf\"; // import * as turf from \"@turf/turf\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Map = () => {\n  _s();\n\n  const [map] = useState(null);\n  const mapContainer = useRef(null);\n  const hoveredPopup = new mapboxgl.Popup({\n    closeButton: false,\n    closeOnClick: false,\n    className: \"floating-popup\"\n  });\n  useEffect(() => {\n    mapboxgl.accessToken = \"pk.eyJ1IjoibGVvc2lsdmFnb21lcyIsImEiOiJja2MwdmxhZjAwejdsMnlsbXFsYTV5ZmVsIn0.MyyvEV2SHjCbCkIUeL_9bA\";\n\n    const initializeMap = ({\n      mapContainer\n    }) => {\n      const map = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: \"mapbox://styles/leosilvagomes/cku2qu4ks2mgz17r100gt7rq6/draft\",\n        center: [-48.84, -22.5],\n        zoom: 6\n      });\n\n      const highlightFeature = feature => {\n        if (feature && feature.geometry) {\n          var coordinates = turf.centerOfMass(feature).geometry.coordinates;\n          var regionName = feature.properties.SA2_NAME16;\n          hoveredPopup //@ts-ignore\n          .setLngLat(coordinates).setHTML(`<h5>${regionName}</h5>`).addTo(map);\n          map.setFeatureState({\n            source: \"sa2\",\n            id: feature.properties.SA2_MAIN16\n          }, {\n            hover: true\n          });\n        } else {\n          hoveredPopup.remove();\n        }\n      };\n\n      map.on(\"load\", () => {\n        map.dragRotate.disable();\n        map.touchZoomRotate.disableRotation();\n        map.addSource(\"sp\", {\n          type: \"geojson\",\n          //@ts-ignore\n          data: geojsonURL,\n          promoteId: \"SP\"\n        });\n        map.addLayer({\n          id: \"fill-sp\",\n          type: \"fill\",\n          source: \"sp\",\n          paint: {\n            \"fill-color\": {\n              property: \"persons_num\",\n              stops: [[0, \"#ADDC91\"], [5152, \"#6CC24A\"], [12799, \"#509E2F\"], [38695, \"#4A7729\"]]\n            },\n            \"fill-opacity\": 0.8\n          }\n        });\n        map.addLayer({\n          id: \"sp-borders\",\n          type: \"line\",\n          source: \"sp\",\n          paint: {\n            \"line-color\": \"#ffffff\",\n            \"line-width\": 0.8,\n            \"line-opacity\": 1\n          }\n        });\n      });\n      map.on(\"mousemove\", \"sp-highlight\", e => {\n        if (e.features.length > 0) {\n          highlightFeature(e.features[0]);\n        }\n      });\n    };\n\n    if (!map) initializeMap({\n      mapContainer\n    });\n  }, [map]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: el => mapContainer.current = el,\n    className: \"map\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 10\n  }, this);\n};\n\n_s(Map, \"fVm1wChoPOXjRxChQ/8bKd06460=\");\n\n_c = Map;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"sources":["/home/leosilvagomes/Documentos/mit/br-dashboard/src/components/Map/index.tsx"],"names":["useState","useRef","useEffect","mapboxgl","geojsonURL","turf","Map","map","mapContainer","hoveredPopup","Popup","closeButton","closeOnClick","className","accessToken","initializeMap","container","current","style","center","zoom","highlightFeature","feature","geometry","coordinates","centerOfMass","regionName","properties","SA2_NAME16","setLngLat","setHTML","addTo","setFeatureState","source","id","SA2_MAIN16","hover","remove","on","dragRotate","disable","touchZoomRotate","disableRotation","addSource","type","data","promoteId","addLayer","paint","property","stops","e","features","length","el"],"mappings":"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","sourcesContent":["import { useState, useRef, useEffect } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\n//@ts-ignore\nimport geojsonURL from \"../../data/SP-geojson.json\";\nimport \"./styles.css\"\nimport * as turf from \"@turf/turf\";\n// import * as turf from \"@turf/turf\";\n\nexport const Map = () => {\n  const [map] = useState(null);\n  const mapContainer = useRef<any>(null);\n\n  const hoveredPopup = new mapboxgl.Popup({\n    closeButton: false,\n    closeOnClick: false,\n    className: \"floating-popup\",\n  });\n\n  useEffect(() => {\n    mapboxgl.accessToken =\n      \"pk.eyJ1IjoibGVvc2lsdmFnb21lcyIsImEiOiJja2MwdmxhZjAwejdsMnlsbXFsYTV5ZmVsIn0.MyyvEV2SHjCbCkIUeL_9bA\";\n\n    const initializeMap = ({mapContainer }: any) => {\n      const map = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: \"mapbox://styles/leosilvagomes/cku2qu4ks2mgz17r100gt7rq6/draft\",\n        center: [-48.84, -22.5],\n        zoom: 6,\n      });\n\n      const highlightFeature = (feature : any) => {\n        if (feature && feature.geometry) {\n          var coordinates = turf.centerOfMass(feature).geometry.coordinates;\n          var regionName = feature.properties.SA2_NAME16;\n          hoveredPopup\n            //@ts-ignore\n            .setLngLat(coordinates)\n            .setHTML(`<h5>${regionName}</h5>`)\n            .addTo(map);\n\n          map.setFeatureState(\n            { source: \"sa2\", id: feature.properties.SA2_MAIN16 },\n            { hover: true }\n          );\n        } else {\n          hoveredPopup.remove();\n        }\n      }\n      \n      map.on(\"load\", () => {\n        map.dragRotate.disable();\n        map.touchZoomRotate.disableRotation();\n\n        map.addSource(\"sp\", {\n          type: \"geojson\",\n          //@ts-ignore\n          data: geojsonURL,\n          promoteId: \"SP\",\n        });\n\n\n        map.addLayer({\n          id: \"fill-sp\",\n          type: \"fill\",\n          source: \"sp\",\n          paint: {\n            \"fill-color\": {\n              property: \"persons_num\",\n              stops: [\n                [0, \"#ADDC91\"],\n                [5152, \"#6CC24A\"],\n                [12799, \"#509E2F\"],\n                [38695, \"#4A7729\"],\n              ],\n            },\n            \"fill-opacity\": 0.8\n          },\n        });\n\n        map.addLayer({\n          id: \"sp-borders\",\n          type: \"line\",\n          source: \"sp\",\n          paint: {\n            \"line-color\": \"#ffffff\",\n            \"line-width\": 0.8,\n            \"line-opacity\": 1,\n          },\n        });\n      });\n\n      map.on(\"mousemove\", \"sp-highlight\", (e: any) => {\n        if (e.features.length > 0) {\n          highlightFeature(e.features[0]);\n        }\n      });\n\n    };\n\n    if (!map) initializeMap({mapContainer});\n  }, [map]);\n\n  return <div ref={(el) => (mapContainer.current = el)} className=\"map\" />;\n};\n"]},"metadata":{},"sourceType":"module"}