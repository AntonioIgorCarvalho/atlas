{"ast":null,"code":"var _jsxFileName = \"/home/leosilvagomes/Documentos/mit/br-dashboard/src/components/Map/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useRef, useEffect } from \"react\";\nimport mapboxgl from \"mapbox-gl\"; //@ts-ignore\n\nimport geojsonURL from \"../../data/SP-districts-geojson.json\";\nimport \"./styles.css\"; // import * as turf from \"@turf/turf\";\n// import * as turf from \"@turf/turf\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Map = () => {\n  _s();\n\n  const [map, setMap] = useState();\n  const mapContainer = useRef();\n  useEffect(() => {\n    mapboxgl.accessToken = \"pk.eyJ1IjoieG16aHUiLCJhIjoiY2tibWlrZjY5MWo3YjJ1bXl4YXd1OGd3bCJ9.xEc_Vf2BkuPkdHhHz521-Q\"; // mapboxgl.accessToken =\n    // \"pk.eyJ1IjoibGVvc2lsdmFnb21lcyIsImEiOiJja2MwdmxhZjAwejdsMnlsbXFsYTV5ZmVsIn0.MyyvEV2SHjCbCkIUeL_9bA\";\n\n    const initializeMap = ({\n      mapContainer\n    }) => {\n      const map = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: \"mapbox://styles/mapbox/dark-v10\" // style: \"mapbox://styles/leosilvagomes/cku2qu4ks2mgz17r100gt7rq6/draft\",\n        // center: [-46.7,-23.68],\n        // zoom: 9.2,\n\n      }); // new mapboxgl.Popup({ closeButton: false, closeOnClick: false, offset:[-46.7,-23.69]})\n      //   .setLngLat([-46.7,-23.69])\n      //   \n      //   .addTo(map);\n      // var popup = new mapboxgl.Popup()\n      //   .setHTML('<h4>Hello World!</h4>')\n      //@ts-ignore\n\n      const el = document.createElement('div');\n      el.className = 'marker';\n      new mapboxgl.Marker().setLngLat([-46.7, -23.69]).addTo(map); // const hoveredPopup = new mapboxgl.Popup({\n      //   closeButton: false,\n      //   closeOnClick: false,\n      //   className: \"floating-popup\",\n      // });\n      // const highlightFeature = (feature : any) => {\n      //   if (feature && feature.geometry) {\n      //     var coordinates = turf.centerOfMass(feature).geometry.coordinates;\n      //     var regionName = feature.properties.name;\n      //     var regionPersonsNum = feature.properties.persons_num;\n      //     hoveredPopup\n      //       .setLngLat([coordinates[0], coordinates[1]])\n      //       .setHTML(`<h5>${regionName} - ${regionPersonsNum}</h5>`)\n      //       .addTo(map);\n      //   } else {\n      //     hoveredPopup.remove();\n      //   }\n      // }\n      // const clearFeatureHighlight = () => {\n      //   highlightFeature(null);\n      // }\n\n      console.log(geojsonURL); // map.on(\"load\", () => {\n      //   map.dragRotate.disable();\n      //   map.touchZoomRotate.disableRotation();\n      //   map.addSource(\"sp\", {\n      //     type: \"geojson\",\n      //     //@ts-ignore\n      //     data: geojsonURL,\n      //     promoteId: \"SP\",\n      //   });\n      //   map.addLayer({\n      //     id: \"fill-sp\",\n      //     type: \"fill\",\n      //     source: \"sp\",\n      //     paint: {\n      //       \"fill-color\":\n      //       {\n      //         property: \"PERSONS_NUM\",\n      //         stops: [\n      //           [0, \"#ADDC91\"],\n      //           [55000, \"#6CC24A\"],\n      //           [110000, \"#509E2F\"],\n      //           [215000, \"#4A7729\"],\n      //         ],\n      //       },\n      //       \"fill-opacity\": 0.8\n      //     },\n      //   });\n      //   map.addLayer({\n      //     id: \"sp-borders\",\n      //     type: \"line\",\n      //     source: \"sp\",\n      //     paint: {\n      //       \"line-color\": \"#ffffff\",\n      //       \"line-width\": 0.8,\n      //       \"line-opacity\": 1,\n      //     },\n      //   });\n      // });\n      // map.on(\"mousemove\", \"fill-sp\", (e: any) => {\n      //   if (e.features.length > 0) {\n      //     highlightFeature(e.features[0]);\n      //   }\n      // });\n      // map.on(\"mouseleave\", \"fill-sp\", clearFeatureHighlight);\n\n      setMap(map);\n    };\n\n    console.log(map);\n    if (!map) initializeMap({\n      mapContainer\n    });\n  }, [map]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    ref: el => mapContainer.current = el,\n    className: \"map\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 10\n  }, this);\n};\n\n_s(Map, \"o/5gB3J1lzJ5EQZDqT+A6WQSsyY=\");\n\n_c = Map;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"sources":["/home/leosilvagomes/Documentos/mit/br-dashboard/src/components/Map/index.tsx"],"names":["useState","useRef","useEffect","mapboxgl","geojsonURL","Map","map","setMap","mapContainer","accessToken","initializeMap","container","current","style","el","document","createElement","className","Marker","setLngLat","addTo","console","log"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,MAAnB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,OAAOC,QAAP,MAAqB,WAArB,C,CACA;;AACA,OAAOC,UAAP,MAAuB,sCAAvB;AACA,OAAO,cAAP,C,CACA;AACA;;;AAEA,OAAO,MAAMC,GAAG,GAAG,MAAM;AAAA;;AACvB,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBP,QAAQ,EAA9B;AACA,QAAMQ,YAAY,GAAGP,MAAM,EAA3B;AAEAC,EAAAA,SAAS,CAAC,MAAM;AAEdC,IAAAA,QAAQ,CAACM,WAAT,GAAwB,wFAAxB,CAFc,CAGd;AACE;;AAEF,UAAMC,aAAa,GAAG,CAAC;AAACF,MAAAA;AAAD,KAAD,KAAyB;AAC7C,YAAMF,GAAG,GAAG,IAAIH,QAAQ,CAACE,GAAb,CAAiB;AAC3BM,QAAAA,SAAS,EAAEH,YAAY,CAACI,OADG;AAE3BC,QAAAA,KAAK,EAAE,iCAFoB,CAG3B;AACA;AACA;;AAL2B,OAAjB,CAAZ,CAD6C,CAS7C;AACA;AACA;AACA;AAEA;AACA;AAEA;;AACA,YAAMC,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAX;AACAF,MAAAA,EAAE,CAACG,SAAH,GAAe,QAAf;AAEA,UAAId,QAAQ,CAACe,MAAb,GACGC,SADH,CACa,CAAC,CAAC,IAAF,EAAO,CAAC,KAAR,CADb,EAEGC,KAFH,CAESd,GAFT,EArB6C,CAyB7C;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEAe,MAAAA,OAAO,CAACC,GAAR,CAAYlB,UAAZ,EAjD6C,CAmD7C;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;;AAEAG,MAAAA,MAAM,CAACD,GAAD,CAAN;AACD,KAxGD;;AA0GAe,IAAAA,OAAO,CAACC,GAAR,CAAYhB,GAAZ;AACA,QAAI,CAACA,GAAL,EAAUI,aAAa,CAAC;AAACF,MAAAA;AAAD,KAAD,CAAb;AACX,GAlHQ,EAkHN,CAACF,GAAD,CAlHM,CAAT;AAoHA,sBAAO;AAAK,IAAA,EAAE,EAAC,KAAR;AAAc,IAAA,GAAG,EAAGQ,EAAD,IAASN,YAAY,CAACI,OAAb,GAAuBE,EAAnD;AAAwD,IAAA,SAAS,EAAC;AAAlE;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,CAzHM;;GAAMT,G;;KAAAA,G","sourcesContent":["import { useState, useRef, useEffect } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\n//@ts-ignore\nimport geojsonURL from \"../../data/SP-districts-geojson.json\";\nimport \"./styles.css\"\n// import * as turf from \"@turf/turf\";\n// import * as turf from \"@turf/turf\";\n\nexport const Map = () => {\n  const [map, setMap] = useState<mapboxgl.Map>();\n  const mapContainer = useRef<any>();\n  \n  useEffect(() => {\n    \n    mapboxgl.accessToken =  \"pk.eyJ1IjoieG16aHUiLCJhIjoiY2tibWlrZjY5MWo3YjJ1bXl4YXd1OGd3bCJ9.xEc_Vf2BkuPkdHhHz521-Q\";\n    // mapboxgl.accessToken =\n      // \"pk.eyJ1IjoibGVvc2lsdmFnb21lcyIsImEiOiJja2MwdmxhZjAwejdsMnlsbXFsYTV5ZmVsIn0.MyyvEV2SHjCbCkIUeL_9bA\";\n      \n    const initializeMap = ({mapContainer}: any) => {\n      const map = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: \"mapbox://styles/mapbox/dark-v10\",\n        // style: \"mapbox://styles/leosilvagomes/cku2qu4ks2mgz17r100gt7rq6/draft\",\n        // center: [-46.7,-23.68],\n        // zoom: 9.2,\n      });\n\n      // new mapboxgl.Popup({ closeButton: false, closeOnClick: false, offset:[-46.7,-23.69]})\n      //   .setLngLat([-46.7,-23.69])\n      //   \n      //   .addTo(map);\n\n      // var popup = new mapboxgl.Popup()\n      //   .setHTML('<h4>Hello World!</h4>')\n    \n      //@ts-ignore\n      const el = document.createElement('div');\n      el.className = 'marker';\n\n      new mapboxgl.Marker()\n        .setLngLat([-46.7,-23.69])\n        .addTo(map);\n        \n      // const hoveredPopup = new mapboxgl.Popup({\n      //   closeButton: false,\n      //   closeOnClick: false,\n      //   className: \"floating-popup\",\n      // });\n\n      // const highlightFeature = (feature : any) => {\n      //   if (feature && feature.geometry) {\n      //     var coordinates = turf.centerOfMass(feature).geometry.coordinates;\n      //     var regionName = feature.properties.name;\n      //     var regionPersonsNum = feature.properties.persons_num;\n      //     hoveredPopup\n      //       .setLngLat([coordinates[0], coordinates[1]])\n      //       .setHTML(`<h5>${regionName} - ${regionPersonsNum}</h5>`)\n      //       .addTo(map);\n      //   } else {\n      //     hoveredPopup.remove();\n      //   }\n      // }\n\n      // const clearFeatureHighlight = () => {\n      //   highlightFeature(null);\n      // }\n\n      console.log(geojsonURL)\n      \n      // map.on(\"load\", () => {\n      //   map.dragRotate.disable();\n      //   map.touchZoomRotate.disableRotation();\n\n      //   map.addSource(\"sp\", {\n      //     type: \"geojson\",\n      //     //@ts-ignore\n      //     data: geojsonURL,\n      //     promoteId: \"SP\",\n      //   });\n\n\n      //   map.addLayer({\n      //     id: \"fill-sp\",\n      //     type: \"fill\",\n      //     source: \"sp\",\n      //     paint: {\n      //       \"fill-color\":\n      //       {\n      //         property: \"PERSONS_NUM\",\n      //         stops: [\n      //           [0, \"#ADDC91\"],\n      //           [55000, \"#6CC24A\"],\n      //           [110000, \"#509E2F\"],\n      //           [215000, \"#4A7729\"],\n      //         ],\n      //       },\n      //       \"fill-opacity\": 0.8\n      //     },\n      //   });\n\n      //   map.addLayer({\n      //     id: \"sp-borders\",\n      //     type: \"line\",\n      //     source: \"sp\",\n      //     paint: {\n      //       \"line-color\": \"#ffffff\",\n      //       \"line-width\": 0.8,\n      //       \"line-opacity\": 1,\n      //     },\n      //   });\n      // });\n\n\n      // map.on(\"mousemove\", \"fill-sp\", (e: any) => {\n      //   if (e.features.length > 0) {\n      //     highlightFeature(e.features[0]);\n      //   }\n      // });\n\n      // map.on(\"mouseleave\", \"fill-sp\", clearFeatureHighlight);\n\n      setMap(map)\n    };\n\n    console.log(map)\n    if (!map) initializeMap({mapContainer});\n  }, [map]);\n\n  return <div id=\"map\" ref={(el) => (mapContainer.current = el)} className=\"map\" />;\n};\n"]},"metadata":{},"sourceType":"module"}